{"ast":null,"code":"import { takeLatest, put } from \"redux-saga/effects\";\nimport { push } from \"react-router-redux\";\nimport { loginError, loginUserSuccess, loginErrorField } from \"../actions/loginAction\";\nimport { decodeTokenAction } from '../actions/decodeAction';\nimport axios from 'axios';\nimport ls from 'local-storage';\n\nconst login = function* login({\n  data\n}) {\n  try {\n    console.log(data);\n    const response = yield axios.post('http://localhost:5000/login', data);\n\n    if (response.data.isValid) {\n      yield put(loginUserSuccess(response.data.token));\n      ls.set('token', response.data.token);\n      yield put(decodeTokenAction(response.data.token));\n      yield put(push(\"/\"));\n    } else {\n      yield put(loginErrorField(response.data.errorField));\n    }\n  } catch (error) {\n    if (error.response) {\n      yield put(loginError(\"error.response.statusText\", \"error.response.status\"));\n    }\n  }\n};\n\nexport default function* () {\n  yield takeLatest(\"LOGIN_USER\", login);\n}","map":{"version":3,"sources":["/Users/isifeddi/Desktop/Matcha/client/src/sagas/loginSaga.js"],"names":["takeLatest","put","push","loginError","loginUserSuccess","loginErrorField","decodeTokenAction","axios","ls","login","data","console","log","response","post","isValid","token","set","errorField","error"],"mappings":"AAAA,SAAQA,UAAR,EAAoBC,GAApB,QAA8B,oBAA9B;AACA,SAAQC,IAAR,QAAmB,oBAAnB;AACA,SAAQC,UAAR,EAAoBC,gBAApB,EAAqCC,eAArC,QAA2D,wBAA3D;AACA,SAAQC,iBAAR,QAAgC,yBAAhC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,EAAP,MAAe,eAAf;;AAEA,MAAMC,KAAK,GACT,UAAUA,KAAV,CAAiB;AAACC,EAAAA;AAAD,CAAjB,EAAyB;AACvB,MAAI;AACFC,IAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;AACA,UAAMG,QAAQ,GAAG,MAAMN,KAAK,CAACO,IAAN,CAAW,6BAAX,EAA0CJ,IAA1C,CAAvB;;AACA,QAAGG,QAAQ,CAACH,IAAT,CAAcK,OAAjB,EACA;AACE,YAAMd,GAAG,CAACG,gBAAgB,CAACS,QAAQ,CAACH,IAAT,CAAcM,KAAf,CAAjB,CAAT;AACAR,MAAAA,EAAE,CAACS,GAAH,CAAO,OAAP,EAAgBJ,QAAQ,CAACH,IAAT,CAAcM,KAA9B;AACA,YAAMf,GAAG,CAACK,iBAAiB,CAACO,QAAQ,CAACH,IAAT,CAAcM,KAAf,CAAlB,CAAT;AACA,YAAMf,GAAG,CAACC,IAAI,CAAC,GAAD,CAAL,CAAT;AACD,KAND,MAQA;AACE,YAAMD,GAAG,CAACI,eAAe,CAACQ,QAAQ,CAACH,IAAT,CAAcQ,UAAf,CAAhB,CAAT;AACD;AACF,GAdD,CAcC,OAAOC,KAAP,EAAc;AACb,QAAIA,KAAK,CAACN,QAAV,EAAoB;AAClB,YAAMZ,GAAG,CAACE,UAAU,CAAC,2BAAD,EAA8B,uBAA9B,CAAX,CAAT;AACD;AACF;AACF,CArBH;;AAuBA,eAAe,aAAa;AAC1B,QAAMH,UAAU,CAAC,YAAD,EAAeS,KAAf,CAAhB;AACD","sourcesContent":["import {takeLatest, put} from \"redux-saga/effects\";\nimport {push} from \"react-router-redux\";\nimport {loginError, loginUserSuccess,loginErrorField} from \"../actions/loginAction\";\nimport {decodeTokenAction} from '../actions/decodeAction';\nimport axios from 'axios';\nimport ls from 'local-storage';\n\nconst login =\n  function *login ({data}) {\n    try {\n      console.log(data)\n      const response = yield axios.post('http://localhost:5000/login', data);\n      if(response.data.isValid)\n      {\n        yield put(loginUserSuccess(response.data.token));\n        ls.set('token', response.data.token);\n        yield put(decodeTokenAction(response.data.token));\n        yield put(push(\"/\"));\n      }\n      else \n      {\n        yield put(loginErrorField(response.data.errorField))\n      }\n    }catch (error) {\n      if (error.response) {\n        yield put(loginError(\"error.response.statusText\", \"error.response.status\"));\n      }\n    }\n  };\n\nexport default function *() {\n  yield takeLatest(\"LOGIN_USER\", login);\n}"]},"metadata":{},"sourceType":"module"}