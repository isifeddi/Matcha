{"ast":null,"code":"import { takeLatest, put, call, delay } from \"redux-saga/effects\";\nimport { push } from \"react-router-redux\";\nimport { resetState } from '../actions/resetStateAction';\nimport { loginError, loginUserSuccess, loginErrorField } from \"../actions/loginAction\";\nimport { updateUserSuccess } from '../actions/userAction';\nimport { request } from './helper';\n\nconst login = function* login({\n  data\n}) {\n  try {\n    const username = data.username;\n    const password = data.password;\n    const response = yield call(request, {\n      \"url\": \"http://localhost:5000/login\",\n      \"data\": {\n        username,\n        password\n      },\n      \"method\": \"post\"\n    });\n\n    if (response.data.isValid) {\n      console.log(response);\n      const user = response.data.user;\n      yield put(loginUserSuccess());\n      yield put(updateUserSuccess(user));\n      if (user.complete === 3) yield put(push(\"/\"));else yield put(push(\"/completeProfile\"));\n    } else {\n      yield put(loginErrorField(response.data.errorField));\n      yield delay(4000);\n      yield put(resetState());\n    }\n  } catch (error) {\n    if (error.response) {\n      yield put(loginError(\"error.response.statusText\", \"error.response.status\"));\n    }\n  }\n};\n\nexport default function* () {\n  yield takeLatest(\"LOGIN_USER\", login);\n}","map":{"version":3,"sources":["/Users/ibouroum/Desktop/Matcha/client/src/sagas/loginSaga.js"],"names":["takeLatest","put","call","delay","push","resetState","loginError","loginUserSuccess","loginErrorField","updateUserSuccess","request","login","data","username","password","response","isValid","console","log","user","complete","errorField","error"],"mappings":"AAAA,SAAQA,UAAR,EAAoBC,GAApB,EAAwBC,IAAxB,EAA6BC,KAA7B,QAAyC,oBAAzC;AACA,SAAQC,IAAR,QAAmB,oBAAnB;AACA,SAAQC,UAAR,QAAyB,6BAAzB;AACA,SAAQC,UAAR,EAAoBC,gBAApB,EAAqCC,eAArC,QAA2D,wBAA3D;AACA,SAAQC,iBAAR,QAAgC,uBAAhC;AACA,SAAQC,OAAR,QAAsB,UAAtB;;AAEA,MAAMC,KAAK,GACT,UAAUA,KAAV,CAAiB;AAACC,EAAAA;AAAD,CAAjB,EAAyB;AACvB,MAAI;AACJ,UAAMC,QAAQ,GAAGD,IAAI,CAACC,QAAtB;AACA,UAAMC,QAAQ,GAAGF,IAAI,CAACE,QAAtB;AACE,UAAMC,QAAQ,GAAG,MAAMb,IAAI,CAACQ,OAAD,EAAU;AACnC,aAAO,6BAD4B;AAEnC,cAAQ;AACNG,QAAAA,QADM;AAEPC,QAAAA;AAFO,OAF2B;AAMnC,gBAAU;AANyB,KAAV,CAA3B;;AASA,QAAGC,QAAQ,CAACH,IAAT,CAAcI,OAAjB,EACA;AAAEC,MAAAA,OAAO,CAACC,GAAR,CAAYH,QAAZ;AACA,YAAOI,IAAI,GAAGJ,QAAQ,CAACH,IAAT,CAAcO,IAA5B;AACA,YAAMlB,GAAG,CAACM,gBAAgB,EAAjB,CAAT;AACA,YAAMN,GAAG,CAACQ,iBAAiB,CAACU,IAAD,CAAlB,CAAT;AACA,UAAGA,IAAI,CAACC,QAAL,KAAkB,CAArB,EACE,MAAMnB,GAAG,CAACG,IAAI,CAAC,GAAD,CAAL,CAAT,CADF,KAGE,MAAMH,GAAG,CAACG,IAAI,CAAC,kBAAD,CAAL,CAAT;AACH,KATD,MAWA;AACE,YAAMH,GAAG,CAACO,eAAe,CAACO,QAAQ,CAACH,IAAT,CAAcS,UAAf,CAAhB,CAAT;AACA,YAAMlB,KAAK,CAAC,IAAD,CAAX;AACA,YAAMF,GAAG,CAACI,UAAU,EAAX,CAAT;AACD;AACF,GA5BD,CA4BC,OAAOiB,KAAP,EAAc;AACb,QAAIA,KAAK,CAACP,QAAV,EAAoB;AAClB,YAAMd,GAAG,CAACK,UAAU,CAAC,2BAAD,EAA8B,uBAA9B,CAAX,CAAT;AACD;AACF;AACF,CAnCH;;AAqCA,eAAe,aAAa;AAC1B,QAAMN,UAAU,CAAC,YAAD,EAAeW,KAAf,CAAhB;AACD","sourcesContent":["import {takeLatest, put,call,delay} from \"redux-saga/effects\";\nimport {push} from \"react-router-redux\";\nimport {resetState} from '../actions/resetStateAction';\nimport {loginError, loginUserSuccess,loginErrorField} from \"../actions/loginAction\";\nimport {updateUserSuccess} from '../actions/userAction'\nimport {request} from './helper';\n\nconst login =\n  function *login ({data}) {\n    try {\n    const username = data.username;\n    const password = data.password;\n      const response = yield call(request, {\n        \"url\": \"http://localhost:5000/login\",\n        \"data\": {\n          username,\n         password\n        },\n        \"method\": \"post\"\n      });\n     \n      if(response.data.isValid)\n      { console.log(response)\n        const  user = response.data.user;\n        yield put(loginUserSuccess());\n        yield put(updateUserSuccess(user))\n        if(user.complete === 3)\n          yield put(push(\"/\"));\n        else\n          yield put(push(\"/completeProfile\"));\n      }\n      else\n      {\n        yield put(loginErrorField(response.data.errorField))\n        yield delay(4000);\n        yield put(resetState());\n      }\n    }catch (error) {\n      if (error.response) {\n        yield put(loginError(\"error.response.statusText\", \"error.response.status\"));\n      }\n    }\n  };\n\nexport default function *() {\n  yield takeLatest(\"LOGIN_USER\", login);\n}"]},"metadata":{},"sourceType":"module"}